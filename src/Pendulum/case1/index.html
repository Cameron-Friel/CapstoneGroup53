<!DOCTYPE html>
<html lang='en' dir='ltr'>
  <head>
    <meta charset='utf-8'>
    <link rel='stylesheet' href='style.css'>
    <title>Matter.js</title>
  </head>
  <body>
    <div class='container'>
      <span id='running-time' class='main-text'></span>
      <span id='pendulum-angle' class='main-text'></span>
      <Button id='pause-button' onclick="pauseGraph()" class='main-text'>Pause</Button>
      <Button id='reset-button' class='main-text'>Reset</Button>
      <div id='canvas'>
        <div class="chart-container" style="float: right; height:20vh; width:40vw">
            <canvas id="chart"></canvas>
        </div>
      </div>


    </div>
</div>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.12.0/matter.js'></script>
  <script src='./bundle.js'></script>
  <script>
  var pauseFlag = 0; // 0 means not paused

  var interval;
  var seconds = 0.0;
var ctx = document.getElementById("chart").getContext('2d');
var myChart = new Chart(ctx, {
  type: 'scatter',
  data: {
      datasets: [{
          label: 'Scatter Dataset',
          data: [{
              x: 5,
              y: 0
          }, {
              x: 8,
              y: 10
          }, {
              x: 20,
              y: 5
          }]
      }]
  },
  options: {
      scales: {
          xAxes: [{
              type: 'linear',
          }]
      }
  }
});
var newData =
addData(myChart, {25,document.getElementById("pendulum-angle").textContent});
//setInterval(addData(myChart, {(seconds + .5),document.getElementById("pendulum-angle").textContent}),500);

function pauseGraph(){
  if (pauseFlag == 1) {
    pauseFlag = 0;
    interval = setInterval(addData(myChart, [(seconds + .5),document.getElementById("pendulum-angle").textContent]),500);
    seconds = seconds + .5;
  }
  else{
    pauseFlag = 1;
    clearInterval(interval);
  }
}

function addData(chart, data) {
    chart.data.datasets.forEach((dataset) => {
        dataset.data.push(data);
    });
    chart.update();
}
</script>

</html>
